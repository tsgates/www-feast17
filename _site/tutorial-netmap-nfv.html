<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta property="og:title" content="ACM SIGCOMM 2017 Tutorial (Full-Day): The Netmap framework for NFV applications - ACM SIGCOMM 2017" />
    <meta property="og:image" content="https://tc.gtisc.gatech.edu" />
    <meta property="og:url" content="/tutorial-netmap-nfv.html" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="copyright" content="This site inherents designs and contents from https://github.com/cawka/SIGCOMM2017 and https://github.com/apietila/SIGCOMM2016" />

    <title>ACM SIGCOMM 2017 Tutorial (Full-Day): The Netmap framework for NFV applications - ACM SIGCOMM 2017</title>

    <!-- fonts -->
    <link href="http://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
    <script src="https://use.fontawesome.com/3f4ded534f.js"></script>

    <!-- Favicon alternatives: https://css-tricks.com/favicon-quiz/ -->
    <!-- Generated using http://realfavicongenerator.net/ -->
    <link rel="apple-touch-icon" sizes="180x180" href="/feast17/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/feast17/images/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/feast17/images/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/feast17/images/favicons/manifest.json">
    <link rel="mask-icon" href="/feast17/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/feast17/images/favicons/favicon.ico">
    <meta name="apple-mobile-web-app-title" content="FEAST 2017">
    <meta name="application-name" content="FEAST 2017">
    <meta name="msapplication-config" content="/feast17/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- send file digest to prevent caching issues -->
    <link rel="stylesheet" href="/feast17/css/site.css?digest=33185dffbe15195d37867ff8ef55f82381ea2a52f9557d40b7e2e2f5177891fc" />

    <!-- make the CSS work with older IE -->
    <script src="/feast17/js/css3-mediaqueries.js"></script>

    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
    <script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script>window.jQuery || document.write('<script src="/feast17/js/jquery-1.11.2.min.js"><\/script>')</script>

    <!-- Grab CDN jquerymobile, with a protocol relative URL; fall back to local if offline -->
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script>$.mobile || document.write('<script src="/feast17/js/jquery.mobile-1.4.5.min.js"><\/script>')</script>

    <script src="/feast17/js/jqm-docs.js"></script>

    <!-- send file digest to prevent caching issues -->
    <script src="/feast17/js/script.js?digest=19bdbd828e6ef866ab91feb50eb955a5dd3093edcacabc45184b5402ea6c7989" type="text/javascript"></script>
  </head>

  <body>
    <div data-role="page" data-theme="a" class="main-page">

      <div class="header" data-role="header" data-theme="a" data-position="inline">
        <div>
          <a href="/feast17/"><img src="/feast17/images/logo.png" alt="FEAST 2017"></a>
        </div>
        <a href="#" onclick="$.mobile.silentScroll($.mobile.activePage.find('.leftnav').position().top)" id="menu-btn" class="ui-btn-right" data-corners="true" data-icon="grid">MENU</a>
      </div>

      <div data-role="content" class="ui-content">
        <div class="content-primary">
          <h2 id="acm-sigcomm-2017-tutorial-full-day-the-netmap-framework-for-nfv-applications">ACM SIGCOMM 2017 Tutorial (Full-Day): The Netmap framework for NFV applications</h2>

<h3 id="call-for-participation">Call For Participation</h3>

<p>The first part of this tutorial provides an overview and an analysis of the challenges for fast user-space network I/O frameworks such as netmap, DPDK, PF_RING. These frameworks support packet processing applications (e.g., routers, middleboxes) that need to deal with millions of packets per seconds (e.g., 10 Gbps or higher), which are often needed in the context of Network Function Virtualization (NFV). For performance reasons, the frameworks typically bypass the kernel or its network stack, and provide user-space applications with a device-independent API for direct access to the physical or virtual Network Interface Card (NIC) hardware.</p>

<p>The tutorial then focuses on Netmap [1, 2, 3] because of its flexibility, multi-faceted capabilities and unique advantages to other frameworks, in particular for NFV use cases.  We introduce Netmap along with its API and example programs. The different features are then presented one by one along with their corresponding use cases and performance numbers.</p>

<p>We aim at attendees becoming able to write a simple packet processing application using the netmap API and run it on several netmap ports on bare metal or inside containers and virtual machines.</p>

<h3 id="presenters">Presenters</h3>

<!-- <div  class="presenters"> -->
<ul class="program" data-role="listview" data-inset="true" data-theme="d" data-dividertheme="a">
         
      <li data-icon="false" class="prog-item">
        <div data-role="collapsible" class="paper-navgroup" data-collapsed="true" data-iconpos="right" data-collapsed-icon="carat-d" data-expanded-icon="carat-u">
          <h4>
            <div>
              <p class="paper-header">
                <div class="ui-grid-a">
                  <div class="ui-block-a"><p>Giuseppe Lettieri</p></div>
                  <div class="ui-block-b"><p>Universita' di Pisa</p></div>
                </div>
              </p>
            </div>
            <div class="ui-li-aside">
            </div>
          </h4>
          <ul data-role="listview" data-inset="false">
            <li data-icon="false">
              <p>
                
                <p>Giuseppe Lettieri is researcher and lecturer at the Dipartiment di Ingegneria dell'Informazione. In the past few years he has contributed to the development and maintenance of the netmap framework for fast packet I/O, including the introduction of netmap pipes, a very fast IPC mechanism based on the netmap API, and the design of ptnetmap, a very fast virtual passthrough for virtual machines. For the Openlab EU project he has designed and implemented the Open vSwitch port for the PlanetLab EU testbed.</p>
              </p>
              <p>&nbsp;</p>
            </li>
          </ul>
        </div>
      </li>
         
      <li data-icon="false" class="prog-item">
        <div data-role="collapsible" class="paper-navgroup" data-collapsed="true" data-iconpos="right" data-collapsed-icon="carat-d" data-expanded-icon="carat-u">
          <h4>
            <div>
              <p class="paper-header">
                <div class="ui-grid-a">
                  <div class="ui-block-a"><p>Vincenzo Maffione</p></div>
                  <div class="ui-block-b"><p>Universita' di Pisa</p></div>
                </div>
              </p>
            </div>
            <div class="ui-li-aside">
            </div>
          </h4>
          <ul data-role="listview" data-inset="false">
            <li data-icon="false">
              <p>
                
                <p>Vincenzo Maffione is a second-year PhD student the Dipartimento di Ingegneria dell'Informazione of the Università di Pisa, Italy. In the past four years he has worked as a netmap maintainer and developed some of its subsystems, including the emulated netmap mode (to run netmap applications over any network interface), ptnetmap host support and guest drivers. He has also integrated the netmap datapath within various hypervisors, including QEMU, bhyve and Xen. His main research interests include high speed user-space networking and Virtual Machine networking.</p>
              </p>
              <p>&nbsp;</p>
            </li>
          </ul>
        </div>
      </li>
         
      <li data-icon="false" class="prog-item">
        <div data-role="collapsible" class="paper-navgroup" data-collapsed="true" data-iconpos="right" data-collapsed-icon="carat-d" data-expanded-icon="carat-u">
          <h4>
            <div>
              <p class="paper-header">
                <div class="ui-grid-a">
                  <div class="ui-block-a"><p>Luigi Rizzo</p></div>
                  <div class="ui-block-b"><p>Universita' di Pisa</p></div>
                </div>
              </p>
            </div>
            <div class="ui-li-aside">
            </div>
          </h4>
          <ul data-role="listview" data-inset="false">
            <li data-icon="false">
              <p>
                
                <p>Luigi Rizzo is associate professor at the Dipartimento di Ingegneria dell'Informazione, University of Pisa. His most popular achievements include the netmap framework for fast packet I/O, the dummynet traffic shaper, and a popular erasure code used for reliable multicast and software RAID. Moreover, he is a longtime FreeBSD committer. Prof. Rizzo has been a frequent visiting researcher at international research institutions and companies. He visited ICSI/Univ. Of California at Berkeley in autumn 2000, 2001, 2002 and 2013; Intel Research Cambridge in autumn 2003 and 2004; Intel Research Berkeley in autumn 2010; Google Mountain View in autumn 2012. He has received funding from several companies including Cisco, Microsoft Research, Intel Research, NetApp. He has been a Programme Committee Member for many conferences including ACM Sigcomm, Infocom, NGC, ICNP, Co-Next, NSDI, EuroSys, Usenix ATC; reviewer for the main journals in networking edited by IEEE, ACM and Elsevier; General Chair for the NGC'99 and ACM Sigcomm 2006 conferences, and Technical Program Co-Chair for the ACM Sigcomm 2009 and CoNEXT 2014 conferences.</p>
              </p>
              <p>&nbsp;</p>
            </li>
          </ul>
        </div>
      </li>
         
      <li data-icon="false" class="prog-item">
        <div data-role="collapsible" class="paper-navgroup" data-collapsed="true" data-iconpos="right" data-collapsed-icon="carat-d" data-expanded-icon="carat-u">
          <h4>
            <div>
              <p class="paper-header">
                <div class="ui-grid-a">
                  <div class="ui-block-a"><p>Michio Honda</p></div>
                  <div class="ui-block-b"><p>NEC Laboratories Europe</p></div>
                </div>
              </p>
            </div>
            <div class="ui-li-aside">
            </div>
          </h4>
          <ul data-role="listview" data-inset="false">
            <li data-icon="false">
              <p>
                
                <p>Michio Honda is a senior researcher at NEC Laboratories Europe in Germany. He has joined the netmap project since 2012. He has worked on transport protocols, middleboxes, user- and kernel-space network stacks, software switch and most recently, network stack design for non-volatile main memory. He received IRTF/ISOC Applied Networking Research Prize in 2011 for middlebox measurement work determining extensibility of TCP, and best paper award at ACM SOSR'15 for work on a scalable, modular software switch with other netmap developers.</p>
              </p>
              <p>&nbsp;</p>
            </li>
          </ul>
        </div>
      </li>
    
  </ul>
<p><!-- </div> --></p>

<h3 id="tutorial-program">Tutorial Program</h3>

<div id="tutorial-netmap-nfv-program" class="tutorial-netmap-nfv-program">
  <ul class="program" data-role="listview" data-filter="true" data-inset="true" data-theme="d" data-dividertheme="a" placeholder="Filter program...">
    
      
        
        <li class="prog-header prog-no-filter ui-bar-a prog-item prog-tbd">
          <h3>TBD   (Room: TBD)</h3>
        </li>
      
    
      
        <li class="ui-li ui-bar-a prog-tutorial prog-item ui-li-divider prog-tbd  " data-role="list-divider">
  <h3>
    9:00am - 9:15am
    
      Welcome and Intro
    
  </h3>
  
    
    
  
</li>

<li class="hidden">Welcome and Intro</li>

      
    
      
        <li class="ui-li ui-bar-a prog-tutorial prog-item ui-li-divider prog-tbd  " data-role="list-divider">
  <h3>
    9:15am - 10:30am
    
      <ul> <li>Background and motivation.</li> <li>Introduction to the Netmap API with examples.</li> <li>The VALE switch and Netmap pipes.</li> </ul>
    
  </h3>
  
    
    
  
</li>

<li class="hidden"><ul> <li>Background and motivation.</li> <li>Introduction to the Netmap API with examples.</li> <li>The VALE switch and Netmap pipes.</li> </ul></li>

      
    
      
        <li class="ui-li ui-bar-b prog-item ui-li-divider prog-tbd  " data-role="list-divider">
  <h3>
    10:30am - 11:00am
    
      Coffee Break
    
    
      (Foyer)
    
  </h3>
  
</li>

<li class="hidden">Coffee Break</li>

      
    
      
        <li class="ui-li ui-bar-a prog-tutorial prog-item ui-li-divider prog-tbd  " data-role="list-divider">
  <h3>
    11:00am - 12:30pm
    
      <ul> <li>Netmap as a backend for VMs.</li> <li>Pass-through of host Netmap ports.</li> </ul>
    
  </h3>
  
    
    
  
</li>

<li class="hidden"><ul> <li>Netmap as a backend for VMs.</li> <li>Pass-through of host Netmap ports.</li> </ul></li>

      
    
      
        <li class="ui-li ui-bar-b prog-item ui-li-divider prog-tbd  " data-role="list-divider">
  <h3>
    12:30pm - 2:00pm
    
      Lunch Break
    
    
      (Foyer)
    
  </h3>
  
</li>

<li class="hidden">Lunch Break</li>

      
    
      
        <li class="ui-li ui-bar-a prog-tutorial prog-item ui-li-divider prog-tbd  " data-role="list-divider">
  <h3>
    2:00pm - 3:30pm
    
      <ul> <li>Hands-on experience: writing an NFV application using the Netmap API.</li> <li>Exploiting the different kinds of Netmap ports and passthrough.</li> </ul>
    
  </h3>
  
    
    
  
</li>

<li class="hidden"><ul> <li>Hands-on experience: writing an NFV application using the Netmap API.</li> <li>Exploiting the different kinds of Netmap ports and passthrough.</li> </ul></li>

      
    
      
        <li class="ui-li ui-bar-b prog-item ui-li-divider prog-tbd  " data-role="list-divider">
  <h3>
    3:30pm - 4:00pm
    
      Coffee Break
    
    
      (Foyer)
    
  </h3>
  
</li>

<li class="hidden">Coffee Break</li>

      
    
      
        <li class="ui-li ui-bar-a prog-tutorial prog-item ui-li-divider prog-tbd listlast listlast" data-role="list-divider">
  <h3>
    4:00pm - 5:30pm
    
      <ul><li>Continue hands-on experience:<ul><li>writing and loading an in-kernel VALE switch module.</li></ul></li> <li>Conclusion.</li> </ul>
    
  </h3>
  
    
    
  
</li>

<li class="hidden"><ul><li>Continue hands-on experience:<ul><li>writing and loading an in-kernel VALE switch module.</li></ul></li> <li>Conclusion.</li> </ul></li>

      
    
  </ul>
</div>

<h3 id="motivation">Motivation</h3>

<p>The need for an alternative mechanism and API for network I/O has been recognized by several O.S. bypass projects (DPDK, PF RING), and comes from the performance limitations of the traditional socket API (and the associated O.S. implementation) in terms of maximum packet rate.  Using a traditional socket API a single processor core is not able to send or receive more than 1-2 million packets per second (Mpps) at minimum packet size (60 bytes), despite of much faster modern NICs which support 10-100 Mpps.  These limitations are largely due to per-packet size-independent costs: system call, packet copy across user/kernel boundary, VFS layer overheads, dynamic (de)allocation of packet metadata (e.g. sk_buff on Linux), NIC register access and interrupts.  Moreover, moving networking to userspace facilitates experimentation and improves portability. The bypass solutions overcome these limitations by pre-allocating packet buffers, mapping those buffers in the application address space and allowing applications to send and receive multiple packets using a single operation (e.g. a system call or a NIC register access). They also use simple packet representation structures optimized for raw packet I/O rather than for full-fledged protocol stack.  When combined together, these techniques allow user-space applications to send/receive tens of millions of packets per second, saturating the NIC capacity even with short packets.  The study of Netmap is a good introduction to these topics, common to all frameworks. However, Netmap brings some additional benefits that are not found elsewhere: it does not force applications to resort to busy-polling, it is available on several platforms (FreeBSD, Linux, Windows), it supports more devices and it introduces a common API which can also be used for VM networking and Inter-Process Communication.</p>

<p>The Netmap framework has evolved significantly from its inception as a user-space packet I/O interface to NIC hardware in 2011.  It is now a flexible network I/O tool that supports many backends (in addition to NICs) and virtualized environments, accessible with the same API. The VALE [4,7] programmable switch (part of Netmap) acts as a virtual switch for Virtual Machines (VMs) and physical NICs, supporting hundreds of virtual ports and over 20 Mpps per-core between its ports.  Netmap pipes [8] are point-to-point virtual links that connect processes or VMs at over 40 Mpps, useful for service function chaining.  Netmap as a fast network backend has been integrated into hypervisors like QEMU, Bhyve and VirtualBox. Accelerated network I/O is also possible for lightweight virtualization (containers) by means of native support for Linux veth devices (over 40 Mpps).  Finally, a virtual pass-through device [5, 6] allows any Netmap interface (e.g. a VALE port, NIC or pipe endpoint) to be safely exposed inside a VM, enabling unprecedented packet-rates (20-40 Mpps) between VMs.</p>

<p>These Netmap features constitute the datapath building blocks for Network Function Virtualization (NFV) deployments. We are not aware of other technologies that allow applications running in two VMs or containers to exchange up to 20-40 Mpps at minimum packet size. With such powerful I/O capabilities, we believe Netmap is the preferred candidate to implement NFV applications such as load balancers, Intrusion Detection Systems, firewalls, etc.</p>

<h3 id="tutorial-type">Tutorial type</h3>

<p>This tutorial will be given as lectures mixed with hands-on training supervised by the speakers.  During the training sessions the participants will be given live images containing all the required software (Netmap, hypervisors, example applications, etc.).  The images will also be available for download on the <a href="http://info.iet.unipi.it/luigi/netmap/">Netmap page</a>.</p>

<h3 id="expected-audience-and-prerequisites">Expected Audience and Prerequisites</h3>

<p>The tutorial targets network engineers and system developers that want to learn what Netmap is and how it can help improving throughput, latency and energy efficiency of their packet processing pipelines, both on bare-metal and Virtual Machines.</p>

<p>Attendees must bring their own laptop, with a Linux distribution or FreeBSD installed directly on the laptop or in a Virtual Machine. Attendees are also expected to have familiarity with networking and programming in C or C++.</p>

<h3 id="references">References</h3>

<ul>
  <li>[1] <a href="http://info.iet.unipi.it/~luigi/netmap/">The Netmap page</a></li>
  <li>[2] The official <a href="https://github.com/luigirizzo/netmap">Netmap code repository</a></li>
  <li>[3] L. Rizzo - netmap: a novel framework for fast packet I/O, USENIX ATC’12, June 2012, Boston, MA</li>
  <li>[4] L. Rizzo, G. Lettieri - VALE: a switched ethernet for virtual machines, ACM CoNEXT, December 2012, Nice, France</li>
  <li>[5] S. Garzarella, G. Lettieri, L. Rizzo - Virtual device passthrough for high speed VM networking, IEEE/ACM ANCS, May 2015, Oakland, CA</li>
  <li>[6] V. Maffione, L. Rizzo, G. Lettieri - Flexible Virtual Networking using netmap passthrough, IEEE LANMAN, June 2016, Rome, Italy</li>
  <li>[7] M. Honda, F. Huici, G. Lettieri, L. Rizzo - mSwitch: A Highly-Scalable, Modular Software Switch, ACM SOSR, June 2015, Santa Clara, CA</li>
  <li>[8] L. Rizzo, G. Lettieri, M. Honda - Netmap as a core networking technology, AsiaBSDCon, March 2014, Tokyo</li>
</ul>

        </div><!-- content-primary -->

        <div class="leftnav" role="panel" data-position="left" data-display="overlay" data-theme="a">

  <a href="/feast17/"><img src="/feast17/images/logo.png" alt="FEAST 2017"></a>

  <ul data-role="listview" data-inset="true" data-theme="a" data-divider-theme="a">

    
      
        
        <li class=" " data-icon="false">
          <a href="/feast17/"><i class="fa fa-home" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Home</a>
        </li>
        
    
      
        
        <li class="notlast " data-icon="false">
          <a href="/feast17/program.html"><i class="fa fa-bar-chart" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Program</a>
        </li>
        
    
      
        
        <li class="notlast " data-icon="false">
          <a href="/feast17/cfp.html"><i class="fa fa-bullhorn" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Call for Papers</a>
        </li>
        
    
      
        
        <li class=" " data-icon="false">
          <a href="/feast17/tpc.html"><i class="fa fa-map" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Organizers</a>
        </li>
        
    
  </ul>
</div>

      </div> <!-- content -->
    </div> <!-- page -->
  </body>
</html>
